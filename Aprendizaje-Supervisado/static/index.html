<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Machine Learning</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="app">
        <div id="auth-section" class="auth-container">
            <div class="auth-card">
                <h1>Sistema de Machine Learning</h1>
                
                <div id="login-form" class="form-section active">
                    <h2>Iniciar Sesión</h2>
                    <form onsubmit="handleLogin(event)">
                        <div class="form-group">
                            <label>Email:</label>
                            <input type="email" id="login-email" required>
                        </div>
                        <div class="form-group">
                            <label>Contraseña:</label>
                            <input type="password" id="login-password" required>
                        </div>
                        <button type="submit" class="btn btn-primary">Iniciar Sesión</button>
                        <p class="form-switch">¿No tienes cuenta? <a href="#" onclick="showRegister()">Regístrate aquí</a></p>
                    </form>
                </div>

                <div id="register-form" class="form-section">
                    <h2>Registrarse</h2>
                    <form onsubmit="handleRegister(event)">
                        <div class="form-group">
                            <label>Nombre:</label>
                            <input type="text" id="register-name" required>
                        </div>
                        <div class="form-group">
                            <label>Email:</label>
                            <input type="email" id="register-email" required>
                        </div>
                        <div class="form-group">
                            <label>Código de Estudiante (6 dígitos):</label>
                            <input type="text" id="register-code" pattern="[0-9]{6}" maxlength="6" required>
                        </div>
                        <div class="form-group">
                            <label>Contraseña:</label>
                            <input type="password" id="register-password" required>
                        </div>
                        <button type="submit" class="btn btn-primary">Registrarse</button>
                        <p class="form-switch">¿Ya tienes cuenta? <a href="#" onclick="showLogin()">Inicia sesión aquí</a></p>
                    </form>
                </div>
            </div>
        </div>

        <div id="dashboard-section" class="dashboard-container" style="display: none;">
            <nav class="navbar">
                <div class="nav-brand">ML System</div>
                <div class="nav-user">
                    <span id="user-name"></span>
                    <button onclick="logout()" class="btn btn-logout">Cerrar Sesión</button>
                </div>
            </nav>

            <div class="dashboard-content">
                <aside class="sidebar">
                    <h3>Opciones</h3>
                    <ul class="menu">
                        <li><a href="#" onclick="showSection('data')" class="active">1. Gestión de Datos</a></li>
                        <li><a href="#" onclick="showSection('regression')">2. Regresión</a></li>
                        <li><a href="#" onclick="showSection('logistic')">3. Regresión Logística</a></li>
                        <li><a href="#" onclick="showSection('tree')">4. Árboles de Decisión</a></li>
                        <li><a href="#" onclick="showSection('report')">5. Generar Reporte</a></li>
                    </ul>
                </aside>

                <main class="main-content">
                    <div id="data-section" class="content-section active">
                        <h2>Gestión de Datos</h2>
                        
                        <div class="card">
                            <h3>Cargar Datos</h3>
                            <div class="form-group">
                                <label>Subir archivo CSV o Excel:</label>
                                <input type="file" id="file-upload" accept=".csv,.xlsx,.xls">
                                <button onclick="uploadFile()" class="btn btn-primary">Cargar Archivo</button>
                            </div>
                        </div>

                        <div class="card">
                            <h3>Generar Datos Aleatorios</h3>
                            <div class="form-inline">
                                <div class="form-group">
                                    <label>Filas:</label>
                                    <input type="number" id="random-rows" value="100" min="10" max="10000">
                                </div>
                                <div class="form-group">
                                    <label>Columnas:</label>
                                    <input type="number" id="random-cols" value="5" min="2" max="20">
                                </div>
                                <button onclick="generateRandomData()" class="btn btn-primary">Generar</button>
                            </div>
                        </div>

                        <div class="card">
                            <h3>Datasets Disponibles</h3>
                            <div id="datasets-list"></div>
                        </div>

                        <div id="data-preview" class="card" style="display: none;">
                            <h3>Vista Previa de Datos</h3>
                            <div id="preview-content"></div>
                        </div>
                    </div>

                    <div id="regression-section" class="content-section">
                        <h2>Modelos de Regresión</h2>
                        
                        <div class="card">
                            <h3>Configuración del Modelo</h3>
                            <div class="form-group">
                                <label>Dataset:</label>
                                <select id="reg-dataset"></select>
                            </div>
                            <div class="form-group">
                                <label>Tipo de Modelo:</label>
                                <select id="reg-model">
                                    <option value="linear">Regresión Lineal Múltiple</option>
                                    <option value="polynomial">Regresión Polinomial</option>
                                    <option value="rbf">Regresión RBF (Kernel Radial)</option>
                                    <option value="ridge">Regresión Ridge</option>
                                    <option value="lasso">Regresión Lasso</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Variable Objetivo:</label>
                                <select id="reg-target"></select>
                            </div>
                            <div class="form-group">
                                <label>Variables Predictoras:</label>
                                <div id="reg-features"></div>
                            </div>
                            <button onclick="runRegression()" class="btn btn-primary">Ejecutar Modelo</button>
                        </div>

                        <div id="reg-results" class="card" style="display: none;">
                            <h3>Resultados</h3>
                            <div id="reg-results-content"></div>
                        </div>
                    </div>

                    <div id="logistic-section" class="content-section">
                        <h2>Regresión Logística</h2>
                        
                        <div class="card">
                            <h3>Configuración del Modelo</h3>
                            <div class="form-group">
                                <label>Dataset:</label>
                                <select id="log-dataset"></select>
                            </div>
                            <div class="form-group">
                                <label>Variable Objetivo (Clase):</label>
                                <select id="log-target"></select>
                            </div>
                            <div class="form-group">
                                <label>Variables Predictoras:</label>
                                <div id="log-features"></div>
                            </div>
                            <button onclick="runLogistic()" class="btn btn-primary">Ejecutar Modelo</button>
                        </div>

                        <div id="log-results" class="card" style="display: none;">
                            <h3>Resultados - Análisis ROC y Métricas</h3>
                            <div id="log-results-content"></div>
                        </div>
                    </div>

                    <div id="tree-section" class="content-section">
                        <h2>Árboles de Decisión</h2>
                        
                        <div class="card">
                            <h3>Configuración del Modelo</h3>
                            <div class="form-group">
                                <label>Dataset:</label>
                                <select id="tree-dataset"></select>
                            </div>
                            <div class="form-group">
                                <label>Algoritmo:</label>
                                <select id="tree-model">
                                    <option value="id3">ID3 (Entropía/Ganancia de Información)</option>
                                    <option value="c45">C4.5 (Mejora de ID3)</option>
                                    <option value="cart">CART (Índice de Gini)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Variable Objetivo:</label>
                                <select id="tree-target"></select>
                            </div>
                            <div class="form-group">
                                <label>Profundidad Máxima (opcional):</label>
                                <input type="number" id="tree-depth" min="1" max="20" placeholder="Dejar vacío para sin límite">
                            </div>
                            <div class="form-group">
                                <label>Variables Predictoras:</label>
                                <div id="tree-features"></div>
                            </div>
                            <button onclick="runDecisionTree()" class="btn btn-primary">Ejecutar Modelo</button>
                        </div>

                        <div id="tree-results" class="card" style="display: none;">
                            <h3>Resultados - Visualización y Análisis</h3>
                            <div id="tree-results-content"></div>
                        </div>
                    </div>

                    <div id="report-section" class="content-section">
                        <h2>Generar Reporte PDF</h2>
                        
                        <div class="card">
                            <h3>Modelos a Incluir en el Reporte</h3>
                            <p>Selecciona los modelos ejecutados que deseas incluir en el reporte:</p>
                            <div id="report-models"></div>
                            <button onclick="generateReport()" class="btn btn-primary">Generar y Descargar PDF</button>
                        </div>
                    </div>
                </main>
            </div>
        </div>
    </div>

    <div id="notification" class="notification"></div>

    <script src="script.js"></script>
</body>
</html>
